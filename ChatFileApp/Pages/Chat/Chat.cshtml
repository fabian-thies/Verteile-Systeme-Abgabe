@page "/chat/{chatId:int}"
@using ChatFileApp.Components.Chat
@using ChatFileApp.Data
@model ChatFileApp.Pages.Chat.ChatModel
@{
    ViewData["Title"] = "Chat";
}

<div class="flex">
    <component type="typeof(ChatContacts)"
               render-mode="Static"
               param-ActiveChatId="@Model.ChatId"/>
    <div class="m-8 w-full">
        <div class="messages flex flex-nowrap flex-col gap-4 overflow-y-scroll">
            @foreach (var message in Model.Messages)
            {
                <component type="@typeof(ChatMessage)"
                           render-mode="Static"
                           param-Username="@message.User.UserName"
                           param-Timestamp="message.SentAt"
                           param-Message="@message.Content"/>
            }
        </div>
        <div class="flex gap-6 w-full p-4">
            <input type="text"
                   placeholder="Nachricht an @Model.Conversation.Name"
                   class="block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"/>
            <button
                class="block mt-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg px-5 py-2.5 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40">
                Senden
            </button>
        </div>
    </div>
</div>